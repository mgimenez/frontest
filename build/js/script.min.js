!function(a){"use strict";function b(a,b){var c=Array.prototype.slice.call(b.children);return c.indexOf(a)}function c(){var b,c=a.querySelectorAll(".list-resources a"),d=0,e="",f="";for(d;d<c.length;d++)b=c[d].textContent,"css"===g(b)?e+='<link rel="stylesheet" href="'+c[d].href+'"/>':"js"===g(b)&&(f+='<script src="'+c[d].href+'"></script>');return{css:e,js:f}}function d(b,c,d){var e=a.createElement("li"),f=a.createElement("a"),g=a.createElement("span");f.setAttribute("href",c),f.setAttribute("target","_blank"),g.textContent="x",f.textContent=d,e.appendChild(f),e.appendChild(g),b.appendChild(e)}function e(a){var b=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");if(b.test(a)){var c=a.split("/").pop(-1),d=new RegExp("(.*?).(js|css)$");return d.test(c)?!0:!1}return!1}function f(a){return a.split("/").pop(-1)}function g(a){return a.split(".").pop(-1)}function h(a,b){ace.require("ace/ext/language_tools");var c=ace.edit(a);return c.setTheme("ace/theme/monokai"),c.getSession().setMode("ace/mode/"+b),c.getSession().setUseWorker(!0),c.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),c.$blockScrolling=1/0,c}window.addEventListener("load",function(g){var i=h("editor-html","html"),j=h("editor-css","css"),k=h("editor-js","javascript"),l=a.querySelector(".panel"),m=a.querySelector(".btn-add-resource"),n=a.querySelector(".tabs"),o=[];chrome.storage.sync.get(function(b){if(b.editorHTML&&i.setValue(b.editorHTML,1),b.editorCSS&&j.setValue(b.editorCSS,1),b.editorJS&&k.setValue(b.editorJS,1),b.activeTab&&a.getElementById(b.activeTab).setAttribute("checked","checked"),b.resources)for(var c=a.querySelector(".list-resources"),e=0;e<b.resources.length;e++){var g=b.resources[e];d(c,g,f(g)),o.push(g)}}),i.on("input",function(){chrome.storage.sync.set({editorHTML:i.getValue()})}),j.on("input",function(){chrome.storage.sync.set({editorCSS:j.getValue()})}),k.on("input",function(){chrome.storage.sync.set({editorJS:k.getValue()})}),l.addEventListener("submit",function(a){a.preventDefault();var b="data:text/html, "+c().css+"<style>"+j.getValue()+"</style>"+i.getValue()+c().js+"<script>"+k.getValue()+"</script>";chrome.tabs.create({url:b})}),m.addEventListener("click",function(b){b.preventDefault();var c=a.querySelector("#url-resource"),g=c.value,h=a.querySelector(".list-resources");e(g)?(c.classList.remove("error"),c.value="",d(h,g,f(g)),o.push(g),chrome.storage.sync.set({resources:o})):c.classList.add("error")}),a.querySelector(".list-resources").addEventListener("click",function(a){if("SPAN"===a.target.tagName){var c=b(a.target.parentElement,this);a.target.parentElement.remove(),-1!=c&&(o.splice(c,1),chrome.storage.sync.set({resources:o}))}}),a.querySelector(".icon-feedback").addEventListener("click",function(b){b.preventDefault();var c=a.querySelector(".content-feedback"),d=a.querySelector(".icon-feedback");c.classList.contains("active")?(c.classList.remove("active"),d.classList.remove("active")):(c.classList.add("active"),d.classList.add("active"))}),a.querySelector(".form-feedback").addEventListener("submit",function(b){b.preventDefault();var c=a.querySelector('[name="entry.430085320"]').value,d=a.querySelector(".thank-feedback"),e=new XMLHttpRequest;e.open("POST","https://docs.google.com/forms/d/1Q1MJW8D2ft1LmLt7JouuoZdJsfD2KT8YB4SR4_w4vGI/formResponse",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send("entry.430085320="+c),d.classList.add("active"),setTimeout(function(){a.querySelector(".content-feedback").classList.remove("active"),d.classList.remove("active")},2e3)}),n.addEventListener("change",function(b){var c=a.getElementById("editor-"+b.target.getAttribute("data-lang"));c.querySelector("textarea").focus(),chrome.storage.sync.set({activeTab:b.target.id})})})}(this.document);